@model Ingredient

@{
	ViewData["Title"] = "Details";
}

<div class="container mt-5 mb-5">

	<div class="text-center mb-5">
		<h1 class="display-5 fw-bold text-dark">
			<i class="fa-solid fa-bowl-food me-2 text-primary"></i> Ingredient Details
		</h1>
	</div>

	<div class="card shadow-lg border-0 rounded-4 p-4">
		<div class="card-body">
			<div class="row mb-5 border-bottom pb-4">
				<div class="col-12 text-center">
					<h3 class="fw-bolder text-secondary mb-3">
						<i class="fa-solid fa-tag me-2"></i> Ingredient Name
					</h3>
					<span class="badge bg-primary fs-5 p-3 rounded-pill shadow-sm">
						@Model.Name
					</span>
				</div>
			</div>

			<div class="row">
				<div class="col-12">
					<h3 class="fw-bolder text-secondary mb-3">
						<i class="fa-solid fa-utensils me-2 text-info"></i> Associated Dishes
					</h3>

					@if (Model.ProductIngerdients != null && Model.ProductIngerdients.Any())
					{
						<ul class="list-group list-group-flush border rounded-3 shadow-sm">
							@foreach (var item in Model.ProductIngerdients)
							{
								<li class="list-group-item list-group-item-action d-flex justify-content-between align-items-center py-2">

									<span class="fw-semibold text-truncate me-3">
										<i class="fas fa-utensils me-2 text-info"></i>
										<a href="/Product/ProductDetails?id=@item.Product.Id" class="text-decoration-none text-dark">
											@item.Product.Name
										</a>
									</span>

									<span class="badge bg-success rounded-pill px-3 py-2 shadow-sm">
										$@item.Product.Price
									</span>

								</li>
							}
						</ul>
					}
					else
					{
						<div class="alert alert-warning text-center" role="alert">
							<i class="fa-solid fa-circle-info me-2"></i> No associated dishes found for this ingredient.
						</div>
					}
				</div>
			</div>

		</div>

		<div class="card-footer bg-transparent border-0 pt-4 d-flex justify-content-between align-items-center">

			<a asp-action="Index" asp-controller="Ingredient" class="btn btn-outline-secondary btn-lg px-4 shadow-sm">
				<i class="fa fa-arrow-left me-1"></i> Back to List
			</a>
			@if (User.IsInRole("Admin"))
			{
				<div class="d-flex gap-3">

					<a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-primary btn-lg px-4 shadow-sm">
						<i class="fa fa-edit me-1"></i> Edit
					</a>

					<form asp-action="Delete" asp-controller="Ingredient" asp-route-id="@Model.Id" method="post" id="deleteForm">
						@Html.AntiForgeryToken()
					</form>

					<button type="button"
							class="btn btn-danger btn-lg px-4 shadow-sm"
							onclick="confirmDelete()">
						<i class="fa fa-trash-alt me-1"></i> Delete
					</button>

				</div>
			}

		</div>
	</div>
@section Scripts {
		<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
		<script>
				  function confirmDelete() {
				Swal.fire({
					title: 'Are you sure?',
					text: `This ingredient (@Html.Raw(Model.Name)) will be permanently deleted and cannot be recovered!`,
					icon: 'warning',
					showCancelButton: true,
					confirmButtonColor: '#d33',
					cancelButtonColor: '#6c757d',
					confirmButtonText: 'Yes, delete it!',
					cancelButtonText: 'Cancel'
				}).then((result) => {
					if (result.isConfirmed) {
						document.getElementById('deleteForm').submit();
					}
				});
			}

		</script>
}
